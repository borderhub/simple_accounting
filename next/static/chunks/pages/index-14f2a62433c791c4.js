(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{360:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(7876),s=n(7328),a=n.n(s),i=n(8230),c=n.n(i),o=n(9099);function l(e){let{children:t}=e,n=(0,o.useRouter)();return(0,r.jsxs)("div",{className:"min-h-screen flex flex-col bg-gray-100",children:[(0,r.jsxs)(a(),{children:[(0,r.jsx)("title",{children:"簡易会計システム"}),(0,r.jsx)("meta",{name:"description",content:"簡易会計・確定申告支援システム"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsx)("header",{className:"bg-white shadow",children:(0,r.jsx)("div",{className:"container mx-auto p-4",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)(c(),{href:"/",className:"text-2xl font-bold",children:"簡易会計システム"}),(0,r.jsx)("nav",{className:"hidden md:block",children:(0,r.jsx)("ul",{className:"flex space-x-6",children:[{href:"/",label:"ホーム"},{href:"/transactions",label:"仕訳入力"},{href:"/documents",label:"帳票作成"},{href:"/reports",label:"財務レポート"},{href:"/settings",label:"設定"}].map(e=>(0,r.jsx)("li",{children:(0,r.jsx)(c(),{href:e.href,className:"".concat(n.pathname===e.href?"text-blue-500 font-medium":"text-gray-600 hover:text-blue-500"),children:e.label})},e.href))})}),(0,r.jsx)("button",{className:"md:hidden",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"w-6 h-6",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})})}),(0,r.jsx)("main",{className:"flex-grow py-6",children:t}),(0,r.jsx)("footer",{className:"bg-white shadow-inner mt-auto",children:(0,r.jsx)("div",{className:"container mx-auto p-4 text-center text-gray-600",children:(0,r.jsx)("p",{children:"\xa9 2025 簡易会計システム"})})})]})}},4049:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var r=n(7876),s=n(4232),a=n(360),i=n(5019),c=n(8230),o=n.n(c);function l(){let[e,t]=(0,s.useState)([]),[n,c]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{(async function(){try{let e=(await (0,i.q)()).transaction("transactions","readonly").objectStore("transactions"),n=await e.getAll();t(n.sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()).slice(0,5))}catch(e){console.error("取引履歴の取得に失敗しました:",e)}finally{c(!1)}})()},[]),(0,r.jsx)(a.A,{children:(0,r.jsxs)("div",{className:"container mx-auto p-4",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"簡易会計システム"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[{title:"簡単仕訳入力",description:"日々の取引を簡単に記録できます",href:"/transactions/new",color:"blue"},{title:"帳票作成",description:"領収書・請求書を簡単に作成",href:"/documents",color:"green"},{title:"財務レポート",description:"資産表・決算書・確定申告書類",href:"/reports",color:"purple"}].map(e=>{let{title:t,description:n,href:s,color:a}=e;return(0,r.jsxs)("div",{className:"bg-white p-4 rounded shadow",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:t}),(0,r.jsx)("p",{className:"mb-4",children:n}),(0,r.jsxs)(o(),{href:s,className:"inline-block bg-".concat(a,"-500 text-white px-4 py-2 rounded hover:bg-").concat(a,"-600"),children:[t,"へ"]})]},s)})}),(0,r.jsxs)("div",{className:"mt-8 bg-white p-4 rounded shadow",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"最近の取引"}),n?(0,r.jsx)("p",{children:"データ読み込み中..."}):e.length>0?(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"bg-gray-100",children:[(0,r.jsx)("th",{className:"p-2 text-left",children:"日付"}),(0,r.jsx)("th",{className:"p-2 text-left",children:"摘要"}),(0,r.jsx)("th",{className:"p-2 text-right",children:"金額"}),(0,r.jsx)("th",{className:"p-2 text-left",children:"借方科目"}),(0,r.jsx)("th",{className:"p-2 text-left",children:"貸方科目"})]})}),(0,r.jsx)("tbody",{children:e.map(e=>(0,r.jsxs)("tr",{className:"border-b",children:[(0,r.jsx)("td",{className:"p-2",children:new Date(e.date).toLocaleDateString()}),(0,r.jsx)("td",{className:"p-2",children:e.description}),(0,r.jsxs)("td",{className:"p-2 text-right",children:[e.amount.toLocaleString(),"円"]}),(0,r.jsx)("td",{className:"p-2",children:e.debitAccount}),(0,r.jsx)("td",{className:"p-2",children:e.creditAccount})]},e.id))})]})}):(0,r.jsx)("p",{children:"取引データがありません。新しい仕訳を入力してください。"}),(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)(o(),{href:"/transactions",className:"text-blue-500 hover:underline",children:"すべての取引を表示 →"})})]})]})})}},5019:(e,t,n)=>{"use strict";let r,s;n.d(t,{q:()=>y});let a=(e,t)=>t.some(t=>e instanceof t),i=new WeakMap,c=new WeakMap,o=new WeakMap,l={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return i.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return d(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function d(e){if(e instanceof IDBRequest)return function(e){let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",a)},s=()=>{t(d(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",a)});return o.set(t,e),t}(e);if(c.has(e))return c.get(e);let t=function(e){if("function"==typeof e)return(s||(s=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(h(this),t),d(this.request)}:function(...t){return d(e.apply(h(this),t))};return(e instanceof IDBTransaction&&function(e){if(i.has(e))return;let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",a),e.removeEventListener("abort",a)},s=()=>{t(),r()},a=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",a),e.addEventListener("abort",a)});i.set(e,t)}(e),a(e,r||(r=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])))?new Proxy(e,l):e}(e);return t!==e&&(c.set(e,t),o.set(t,e)),t}let h=e=>o.get(e),u=["get","getKey","getAll","getAllKeys","count"],x=["put","add","delete","clear"],m=new Map;function f(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(m.get(t))return m.get(t);let n=t.replace(/FromIndex$/,""),r=t!==n,s=x.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||u.includes(n)))return;let a=async function(e,...t){let a=this.transaction(e,s?"readwrite":"readonly"),i=a.store;return r&&(i=i.index(t.shift())),(await Promise.all([i[n](...t),s&&a.done]))[0]};return m.set(t,a),a}l=(e=>({...e,get:(t,n,r)=>f(t,n)||e.get(t,n,r),has:(t,n)=>!!f(t,n)||e.has(t,n)}))(l);let p=["continue","continuePrimaryKey","advance"],j={},b=new WeakMap,g=new WeakMap,w={get(e,t){if(!p.includes(t))return e[t];let n=j[t];return n||(n=j[t]=function(...e){b.set(this,g.get(this)[t](...e))}),n}};async function*N(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;let n=new Proxy(t,w);for(g.set(n,t),o.set(n,h(t));t;)yield n,t=await (b.get(n)||t.continue()),b.delete(n)}function v(e,t){return t===Symbol.asyncIterator&&a(e,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===t&&a(e,[IDBIndex,IDBObjectStore])}async function y(){return function(e,t,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){let i=indexedDB.open(e,1),c=d(i);return r&&i.addEventListener("upgradeneeded",e=>{r(d(i.result),e.oldVersion,e.newVersion,d(i.transaction),e)}),n&&i.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),c.then(e=>{a&&e.addEventListener("close",()=>a()),s&&e.addEventListener("versionchange",e=>s(e.oldVersion,e.newVersion,e))}).catch(()=>{}),c}("AccountingAppDB",0,{upgrade(e){if(!e.objectStoreNames.contains("transactions")){let t=e.createObjectStore("transactions",{keyPath:"id"});t.createIndex("date","date"),t.createIndex("debitAccount","debitAccount"),t.createIndex("creditAccount","creditAccount")}if(!e.objectStoreNames.contains("documents")){let t=e.createObjectStore("documents",{keyPath:"id"});t.createIndex("type","type"),t.createIndex("date","date")}e.objectStoreNames.contains("settings")||e.createObjectStore("settings",{keyPath:"id"})}})}l=(e=>({...e,get:(t,n,r)=>v(t,n)?N:e.get(t,n,r),has:(t,n)=>v(t,n)||e.has(t,n)}))(l)},6760:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(4049)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[8,636,593,792],()=>t(6760)),_N_E=e.O()}]);