(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[363],{360:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(7876),s=n(7328),a=n.n(s),c=n(8230),i=n.n(c),o=n(9099);function l(e){let{children:t}=e,n=(0,o.useRouter)();return(0,r.jsxs)("div",{className:"min-h-screen flex flex-col bg-gray-100",children:[(0,r.jsxs)(a(),{children:[(0,r.jsx)("title",{children:"簡易会計システム"}),(0,r.jsx)("meta",{name:"description",content:"簡易会計・確定申告支援システム"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsx)("header",{className:"bg-white shadow",children:(0,r.jsx)("div",{className:"container mx-auto p-4",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)(i(),{href:"/",className:"text-2xl font-bold",children:"簡易会計システム"}),(0,r.jsx)("nav",{className:"hidden md:block",children:(0,r.jsx)("ul",{className:"flex space-x-6",children:[{href:"/",label:"ホーム"},{href:"/transactions",label:"仕訳入力"},{href:"/documents",label:"帳票作成"},{href:"/reports",label:"財務レポート"},{href:"/settings",label:"設定"}].map(e=>(0,r.jsx)("li",{children:(0,r.jsx)(i(),{href:e.href,className:"".concat(n.pathname===e.href?"text-blue-500 font-medium":"text-gray-600 hover:text-blue-500"),children:e.label})},e.href))})}),(0,r.jsx)("button",{className:"md:hidden",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"w-6 h-6",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})})}),(0,r.jsx)("main",{className:"flex-grow py-6",children:t}),(0,r.jsx)("footer",{className:"bg-white shadow-inner mt-auto",children:(0,r.jsx)("div",{className:"container mx-auto p-4 text-center text-gray-600",children:(0,r.jsx)("p",{children:"\xa9 2025 簡易会計システム"})})})]})}},897:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/transactions",function(){return n(6861)}])},5019:(e,t,n)=>{"use strict";let r,s;n.d(t,{q:()=>y});let a=(e,t)=>t.some(t=>e instanceof t),c=new WeakMap,i=new WeakMap,o=new WeakMap,l={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return c.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return d(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function d(e){if(e instanceof IDBRequest)return function(e){let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",a)},s=()=>{t(d(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",a)});return o.set(t,e),t}(e);if(i.has(e))return i.get(e);let t=function(e){if("function"==typeof e)return(s||(s=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(h(this),t),d(this.request)}:function(...t){return d(e.apply(h(this),t))};return(e instanceof IDBTransaction&&function(e){if(c.has(e))return;let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",a),e.removeEventListener("abort",a)},s=()=>{t(),r()},a=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",a),e.addEventListener("abort",a)});c.set(e,t)}(e),a(e,r||(r=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])))?new Proxy(e,l):e}(e);return t!==e&&(i.set(e,t),o.set(t,e)),t}let h=e=>o.get(e),u=["get","getKey","getAll","getAllKeys","count"],x=["put","add","delete","clear"],m=new Map;function f(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(m.get(t))return m.get(t);let n=t.replace(/FromIndex$/,""),r=t!==n,s=x.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||u.includes(n)))return;let a=async function(e,...t){let a=this.transaction(e,s?"readwrite":"readonly"),c=a.store;return r&&(c=c.index(t.shift())),(await Promise.all([c[n](...t),s&&a.done]))[0]};return m.set(t,a),a}l=(e=>({...e,get:(t,n,r)=>f(t,n)||e.get(t,n,r),has:(t,n)=>!!f(t,n)||e.has(t,n)}))(l);let p=["continue","continuePrimaryKey","advance"],j={},b=new WeakMap,g=new WeakMap,w={get(e,t){if(!p.includes(t))return e[t];let n=j[t];return n||(n=j[t]=function(...e){b.set(this,g.get(this)[t](...e))}),n}};async function*N(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;let n=new Proxy(t,w);for(g.set(n,t),o.set(n,h(t));t;)yield n,t=await (b.get(n)||t.continue()),b.delete(n)}function v(e,t){return t===Symbol.asyncIterator&&a(e,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===t&&a(e,[IDBIndex,IDBObjectStore])}async function y(){return function(e,t,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){let c=indexedDB.open(e,1),i=d(c);return r&&c.addEventListener("upgradeneeded",e=>{r(d(c.result),e.oldVersion,e.newVersion,d(c.transaction),e)}),n&&c.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),i.then(e=>{a&&e.addEventListener("close",()=>a()),s&&e.addEventListener("versionchange",e=>s(e.oldVersion,e.newVersion,e))}).catch(()=>{}),i}("AccountingAppDB",0,{upgrade(e){if(!e.objectStoreNames.contains("transactions")){let t=e.createObjectStore("transactions",{keyPath:"id"});t.createIndex("date","date"),t.createIndex("debitAccount","debitAccount"),t.createIndex("creditAccount","creditAccount")}if(!e.objectStoreNames.contains("documents")){let t=e.createObjectStore("documents",{keyPath:"id"});t.createIndex("type","type"),t.createIndex("date","date")}e.objectStoreNames.contains("settings")||e.createObjectStore("settings",{keyPath:"id"})}})}l=(e=>({...e,get:(t,n,r)=>v(t,n)?N:e.get(t,n,r),has:(t,n)=>v(t,n)||e.has(t,n)}))(l)},6861:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var r=n(7876),s=n(4232),a=n(8230),c=n.n(a),i=n(360),o=n(5019);function l(){let[e,t]=(0,s.useState)([]),[n,a]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{(async function(){try{let e=(await (0,o.q)()).transaction("transactions","readonly").objectStore("transactions"),n=await e.getAll();t(n.sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime())),a(!1)}catch(e){console.error("取引履歴の取得に失敗しました:",e),a(!1)}})()},[]),(0,r.jsx)(i.A,{children:(0,r.jsxs)("div",{className:"container mx-auto p-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"取引一覧"}),(0,r.jsx)(c(),{href:"/transactions/new",className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"新規仕訳入力"})]}),n?(0,r.jsx)("div",{className:"text-center py-8",children:(0,r.jsx)("p",{children:"データ読み込み中..."})}):e.length>0?(0,r.jsx)("div",{className:"overflow-x-auto bg-white rounded shadow",children:(0,r.jsxs)("table",{className:"min-w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"bg-gray-100",children:[(0,r.jsx)("th",{className:"p-3 text-left",children:"日付"}),(0,r.jsx)("th",{className:"p-3 text-left",children:"摘要"}),(0,r.jsx)("th",{className:"p-3 text-right",children:"金額"}),(0,r.jsx)("th",{className:"p-3 text-left",children:"借方科目"}),(0,r.jsx)("th",{className:"p-3 text-left",children:"貸方科目"}),(0,r.jsx)("th",{className:"p-3 text-center",children:"操作"})]})}),(0,r.jsx)("tbody",{children:e.map(e=>(0,r.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"p-3",children:new Date(e.date).toLocaleDateString()}),(0,r.jsx)("td",{className:"p-3",children:e.description}),(0,r.jsxs)("td",{className:"p-3 text-right",children:[e.amount.toLocaleString(),"円"]}),(0,r.jsx)("td",{className:"p-3",children:e.debitAccount}),(0,r.jsx)("td",{className:"p-3",children:e.creditAccount}),(0,r.jsx)("td",{className:"p-3 text-center",children:(0,r.jsx)(c(),{href:"/transactions/".concat(e.id),className:"text-blue-500 hover:underline mr-2",children:"詳細"})})]},e.id))})]})}):(0,r.jsxs)("div",{className:"text-center py-8 bg-white rounded shadow",children:[(0,r.jsx)("p",{className:"mb-4",children:"取引データがありません"}),(0,r.jsx)(c(),{href:"/transactions/new",className:"text-blue-500 hover:underline",children:"最初の取引を入力する"})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[8,636,593,792],()=>t(897)),_N_E=e.O()}]);