(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[350],{360:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var s=n(7876),a=n(7328),r=n.n(a),i=n(8230),c=n.n(i),o=n(9099);function l(e){let{children:t}=e,n=(0,o.useRouter)();return(0,s.jsxs)("div",{className:"min-h-screen flex flex-col bg-gray-100",children:[(0,s.jsxs)(r(),{children:[(0,s.jsx)("title",{children:"簡易会計システム"}),(0,s.jsx)("meta",{name:"description",content:"簡易会計・確定申告支援システム"}),(0,s.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,s.jsx)("header",{className:"bg-white shadow",children:(0,s.jsx)("div",{className:"container mx-auto p-4",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)(c(),{href:"/",className:"text-2xl font-bold",children:"簡易会計システム"}),(0,s.jsx)("nav",{className:"hidden md:block",children:(0,s.jsx)("ul",{className:"flex space-x-6",children:[{href:"/",label:"ホーム"},{href:"/transactions",label:"仕訳入力"},{href:"/documents",label:"帳票作成"},{href:"/reports",label:"財務レポート"},{href:"/data-management",label:"データ管理"}].map(e=>(0,s.jsx)("li",{children:(0,s.jsx)(c(),{href:e.href,className:"".concat(n.pathname===e.href?"text-blue-500 font-medium":"text-gray-600 hover:text-blue-500"),children:e.label})},e.href))})}),(0,s.jsx)("button",{className:"md:hidden",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"w-6 h-6",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})})}),(0,s.jsx)("main",{className:"flex-grow py-6",children:t}),(0,s.jsx)("footer",{className:"bg-white shadow-inner mt-auto",children:(0,s.jsx)("div",{className:"container mx-auto p-4 text-center text-gray-600",children:(0,s.jsx)("p",{children:"\xa9 2025 簡易会計システム"})})})]})}},3747:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var s=n(7876),a=n(4232),r=n(9099),i=n(360),c=n(5019);let o={現金:{name:"現金",category:"asset",isDebit:!0},普通預金:{name:"普通預金",category:"asset",isDebit:!0},売掛金:{name:"売掛金",category:"asset",isDebit:!0},商品:{name:"商品",category:"asset",isDebit:!0},固定資産:{name:"固定資産",category:"asset",isDebit:!0},買掛金:{name:"買掛金",category:"liability",isDebit:!1},借入金:{name:"借入金",category:"liability",isDebit:!1},未払金:{name:"未払金",category:"liability",isDebit:!1},未払費用:{name:"未払費用",category:"liability",isDebit:!1},資本金:{name:"資本金",category:"equity",isDebit:!1},元入金:{name:"元入金",category:"equity",isDebit:!1},利益剰余金:{name:"利益剰余金",category:"equity",isDebit:!1},売上:{name:"売上",category:"revenue",isDebit:!1},仕入:{name:"仕入",category:"expense",isDebit:!0},給料:{name:"給料",category:"expense",isDebit:!0},家賃:{name:"家賃",category:"expense",isDebit:!0},水道光熱費:{name:"水道光熱費",category:"expense",isDebit:!0},通信費:{name:"通信費",category:"expense",isDebit:!0},旅費交通費:{name:"旅費交通費",category:"expense",isDebit:!0},消耗品費:{name:"消耗品費",category:"expense",isDebit:!0},雑費:{name:"雑費",category:"expense",isDebit:!0}},l=()=>{let e=(0,r.useRouter)(),[t,n]=(0,a.useState)(new Date().toISOString().split("T")[0]),[l,d]=(0,a.useState)(!0),[u,h]=(0,a.useState)({assets:{title:"資産の部",accounts:[],total:0},liabilities:{title:"負債の部",accounts:[],total:0},equity:{title:"純資産の部",accounts:[],total:0}});(0,a.useEffect)(()=>{m()},[t]);let m=async()=>{d(!0);try{let e=(await (0,c.q)()).transaction("transactions","readonly").objectStore("transactions"),n=(await e.getAll()).filter(e=>{let n=new Date(e.date),s=new Date(t);return s.setHours(23,59,59,999),n<=s}).map(e=>{let t=new Date(e.date),n=new Date(e.createdAt);return{...e,date:t,createdAt:n}}),s=x(n),a=[],r=[],i=[],o=0,l=0,u=0,m=0;for(let e of s)"asset"===e.category?(a.push(e),o+=e.balance):"liability"===e.category?(r.push(e),l+=e.balance):"equity"===e.category?(i.push(e),u+=e.balance):"revenue"===e.category?m+=e.balance:"expense"===e.category&&(m-=e.balance);0!==m&&(i.push({account:"当期純利益",category:"equity",balance:m}),u+=m),h({assets:{title:"資産の部",accounts:a,total:o},liabilities:{title:"負債の部",accounts:r,total:l},equity:{title:"純資産の部",accounts:i,total:u}}),d(!1)}catch(e){console.error("バランスシートの作成に失敗しました:",e),d(!1)}},x=e=>{let t={};for(let n of e){t[n.debitAccount]||(t[n.debitAccount]=0);let e=o[n.debitAccount];e&&(e.isDebit?t[n.debitAccount]+=n.amount:t[n.debitAccount]-=n.amount),t[n.creditAccount]||(t[n.creditAccount]=0);let s=o[n.creditAccount];s&&(s.isDebit?t[n.creditAccount]-=n.amount:t[n.creditAccount]+=n.amount)}let n=[];for(let[e,s]of Object.entries(t))0!==s&&o[e]&&n.push({account:e,category:o[e].category,balance:s});return n},b=e=>e.toLocaleString("ja-JP",{style:"currency",currency:"JPY"}),y=e=>(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:e.title}),(0,s.jsx)("div",{className:"bg-white rounded shadow overflow-hidden",children:(0,s.jsxs)("table",{className:"min-w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-100",children:[(0,s.jsx)("th",{className:"p-3 text-left",children:"科目"}),(0,s.jsx)("th",{className:"p-3 text-right",children:"金額"})]})}),(0,s.jsxs)("tbody",{children:[e.accounts.map((e,t)=>(0,s.jsxs)("tr",{className:"border-b",children:[(0,s.jsx)("td",{className:"p-3",children:e.account}),(0,s.jsx)("td",{className:"p-3 text-right",children:b(e.balance)})]},t)),(0,s.jsxs)("tr",{className:"bg-gray-50 font-semibold",children:[(0,s.jsx)("td",{className:"p-3",children:"合計"}),(0,s.jsx)("td",{className:"p-3 text-right",children:b(e.total)})]})]})]})})]});return(0,s.jsx)(i.A,{children:(0,s.jsxs)("div",{className:"container mx-auto p-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"貸借対照表（B/S）"}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"mr-2",children:"基準日:"}),(0,s.jsx)("input",{type:"date",value:t,onChange:e=>{n(e.target.value)},className:"p-2 border rounded"})]})]}),l?(0,s.jsx)("div",{className:"text-center py-8",children:(0,s.jsx)("p",{children:"データ読み込み中..."})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"bg-white p-4 rounded shadow mb-6",children:[(0,s.jsxs)("div",{className:"text-center mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-bold",children:"貸借対照表"}),(0,s.jsxs)("p",{className:"text-gray-600",children:[new Date(t).toLocaleDateString("ja-JP"),"現在"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsx)("div",{children:y(u.assets)}),(0,s.jsxs)("div",{children:[y(u.liabilities),y(u.equity),(0,s.jsxs)("div",{className:"mt-6 bg-gray-100 p-3 rounded",children:[(0,s.jsxs)("div",{className:"flex justify-between font-bold",children:[(0,s.jsx)("span",{children:"資産合計"}),(0,s.jsx)("span",{children:b(u.assets.total)})]}),(0,s.jsxs)("div",{className:"flex justify-between font-bold mt-2",children:[(0,s.jsx)("span",{children:"負債・純資産合計"}),(0,s.jsx)("span",{children:b(u.liabilities.total+u.equity.total)})]})]})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-between mt-4",children:[(0,s.jsx)("button",{onClick:()=>e.push("/reports"),className:"px-4 py-2 border rounded text-gray-600 hover:bg-gray-100",children:"レポート一覧に戻る"}),(0,s.jsx)("button",{onClick:()=>window.print(),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"印刷・PDF保存"})]})]})]})})}},5019:(e,t,n)=>{"use strict";let s,a;n.d(t,{q:()=>D});let r=(e,t)=>t.some(t=>e instanceof t),i=new WeakMap,c=new WeakMap,o=new WeakMap,l={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return i.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return d(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function d(e){if(e instanceof IDBRequest)return function(e){let t=new Promise((t,n)=>{let s=()=>{e.removeEventListener("success",a),e.removeEventListener("error",r)},a=()=>{t(d(e.result)),s()},r=()=>{n(e.error),s()};e.addEventListener("success",a),e.addEventListener("error",r)});return o.set(t,e),t}(e);if(c.has(e))return c.get(e);let t=function(e){if("function"==typeof e)return(a||(a=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(u(this),t),d(this.request)}:function(...t){return d(e.apply(u(this),t))};return(e instanceof IDBTransaction&&function(e){if(i.has(e))return;let t=new Promise((t,n)=>{let s=()=>{e.removeEventListener("complete",a),e.removeEventListener("error",r),e.removeEventListener("abort",r)},a=()=>{t(),s()},r=()=>{n(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",a),e.addEventListener("error",r),e.addEventListener("abort",r)});i.set(e,t)}(e),r(e,s||(s=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])))?new Proxy(e,l):e}(e);return t!==e&&(c.set(e,t),o.set(t,e)),t}let u=e=>o.get(e),h=["get","getKey","getAll","getAllKeys","count"],m=["put","add","delete","clear"],x=new Map;function b(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(x.get(t))return x.get(t);let n=t.replace(/FromIndex$/,""),s=t!==n,a=m.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(a||h.includes(n)))return;let r=async function(e,...t){let r=this.transaction(e,a?"readwrite":"readonly"),i=r.store;return s&&(i=i.index(t.shift())),(await Promise.all([i[n](...t),a&&r.done]))[0]};return x.set(t,r),r}l=(e=>({...e,get:(t,n,s)=>b(t,n)||e.get(t,n,s),has:(t,n)=>!!b(t,n)||e.has(t,n)}))(l);let y=["continue","continuePrimaryKey","advance"],p={},f=new WeakMap,g=new WeakMap,j={get(e,t){if(!y.includes(t))return e[t];let n=p[t];return n||(n=p[t]=function(...e){f.set(this,g.get(this)[t](...e))}),n}};async function*v(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;let n=new Proxy(t,j);for(g.set(n,t),o.set(n,u(t));t;)yield n,t=await (f.get(n)||t.continue()),f.delete(n)}function w(e,t){return t===Symbol.asyncIterator&&r(e,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===t&&r(e,[IDBIndex,IDBObjectStore])}async function D(){return function(e,t,{blocked:n,upgrade:s,blocking:a,terminated:r}={}){let i=indexedDB.open(e,1),c=d(i);return s&&i.addEventListener("upgradeneeded",e=>{s(d(i.result),e.oldVersion,e.newVersion,d(i.transaction),e)}),n&&i.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),c.then(e=>{r&&e.addEventListener("close",()=>r()),a&&e.addEventListener("versionchange",e=>a(e.oldVersion,e.newVersion,e))}).catch(()=>{}),c}("AccountingAppDB",0,{upgrade(e){if(!e.objectStoreNames.contains("transactions")){let t=e.createObjectStore("transactions",{keyPath:"id"});t.createIndex("date","date"),t.createIndex("debitAccount","debitAccount"),t.createIndex("creditAccount","creditAccount")}if(!e.objectStoreNames.contains("documents")){let t=e.createObjectStore("documents",{keyPath:"id"});t.createIndex("type","type"),t.createIndex("date","date")}e.objectStoreNames.contains("settings")||e.createObjectStore("settings",{keyPath:"id"})}})}l=(e=>({...e,get:(t,n,s)=>w(t,n)?v:e.get(t,n,s),has:(t,n)=>w(t,n)||e.has(t,n)}))(l)},9996:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/reports/balance-sheet",function(){return n(3747)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[8,636,593,792],()=>t(9996)),_N_E=e.O()}]);