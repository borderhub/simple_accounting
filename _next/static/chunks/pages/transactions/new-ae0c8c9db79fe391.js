(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[372],{360:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var r=n(7876),s=n(7328),a=n.n(s),o=n(8230),i=n.n(o),c=n(9099);function d(e){let{children:t}=e,n=(0,c.useRouter)();return(0,r.jsxs)("div",{className:"min-h-screen flex flex-col bg-gray-100",children:[(0,r.jsxs)(a(),{children:[(0,r.jsx)("title",{children:"簡易会計システム"}),(0,r.jsx)("meta",{name:"description",content:"簡易会計・確定申告支援システム"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsx)("header",{className:"bg-white shadow",children:(0,r.jsx)("div",{className:"container mx-auto p-4",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)(i(),{href:"/",className:"text-2xl font-bold",children:"簡易会計システム"}),(0,r.jsx)("nav",{className:"hidden md:block",children:(0,r.jsx)("ul",{className:"flex space-x-6",children:[{href:"/",label:"ホーム"},{href:"/transactions",label:"仕訳入力"},{href:"/documents",label:"帳票作成"},{href:"/reports",label:"財務レポート"},{href:"/data-management",label:"データ管理"}].map(e=>(0,r.jsx)("li",{children:(0,r.jsx)(i(),{href:e.href,className:"".concat(n.pathname===e.href?"text-blue-500 font-medium":"text-gray-600 hover:text-blue-500"),children:e.label})},e.href))})}),(0,r.jsx)("button",{className:"md:hidden",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"w-6 h-6",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})})}),(0,r.jsx)("main",{className:"flex-grow py-6",children:t}),(0,r.jsx)("footer",{className:"bg-white shadow-inner mt-auto",children:(0,r.jsx)("div",{className:"container mx-auto p-4 text-center text-gray-600",children:(0,r.jsx)("p",{children:"\xa9 2025 簡易会計システム"})})})]})}},5019:(e,t,n)=>{"use strict";let r,s;n.d(t,{q:()=>y});let a=(e,t)=>t.some(t=>e instanceof t),o=new WeakMap,i=new WeakMap,c=new WeakMap,d={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return o.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return l(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function l(e){if(e instanceof IDBRequest)return function(e){let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",a)},s=()=>{t(l(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",a)});return c.set(t,e),t}(e);if(i.has(e))return i.get(e);let t=function(e){if("function"==typeof e)return(s||(s=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(u(this),t),l(this.request)}:function(...t){return l(e.apply(u(this),t))};return(e instanceof IDBTransaction&&function(e){if(o.has(e))return;let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",a),e.removeEventListener("abort",a)},s=()=>{t(),r()},a=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",a),e.addEventListener("abort",a)});o.set(e,t)}(e),a(e,r||(r=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])))?new Proxy(e,d):e}(e);return t!==e&&(i.set(e,t),c.set(t,e)),t}let u=e=>c.get(e),m=["get","getKey","getAll","getAllKeys","count"],h=["put","add","delete","clear"],b=new Map;function x(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(b.get(t))return b.get(t);let n=t.replace(/FromIndex$/,""),r=t!==n,s=h.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||m.includes(n)))return;let a=async function(e,...t){let a=this.transaction(e,s?"readwrite":"readonly"),o=a.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),s&&a.done]))[0]};return b.set(t,a),a}d=(e=>({...e,get:(t,n,r)=>x(t,n)||e.get(t,n,r),has:(t,n)=>!!x(t,n)||e.has(t,n)}))(d);let p=["continue","continuePrimaryKey","advance"],f={},j=new WeakMap,v=new WeakMap,g={get(e,t){if(!p.includes(t))return e[t];let n=f[t];return n||(n=f[t]=function(...e){j.set(this,v.get(this)[t](...e))}),n}};async function*w(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;let n=new Proxy(t,g);for(v.set(n,t),c.set(n,u(t));t;)yield n,t=await (j.get(n)||t.continue()),j.delete(n)}function N(e,t){return t===Symbol.asyncIterator&&a(e,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===t&&a(e,[IDBIndex,IDBObjectStore])}async function y(){return function(e,t,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){let o=indexedDB.open(e,1),i=l(o);return r&&o.addEventListener("upgradeneeded",e=>{r(l(o.result),e.oldVersion,e.newVersion,l(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),i.then(e=>{a&&e.addEventListener("close",()=>a()),s&&e.addEventListener("versionchange",e=>s(e.oldVersion,e.newVersion,e))}).catch(()=>{}),i}("AccountingAppDB",0,{upgrade(e){if(!e.objectStoreNames.contains("transactions")){let t=e.createObjectStore("transactions",{keyPath:"id"});t.createIndex("date","date"),t.createIndex("debitAccount","debitAccount"),t.createIndex("creditAccount","creditAccount")}if(!e.objectStoreNames.contains("documents")){let t=e.createObjectStore("documents",{keyPath:"id"});t.createIndex("type","type"),t.createIndex("date","date")}e.objectStoreNames.contains("settings")||e.createObjectStore("settings",{keyPath:"id"})}})}d=(e=>({...e,get:(t,n,r)=>N(t,n)?w:e.get(t,n,r),has:(t,n)=>N(t,n)||e.has(t,n)}))(d)},7368:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/transactions/new",function(){return n(8895)}])},8895:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(7876),s=n(4232),a=n(9099),o=n(360),i=n(5019);function c(){let e=(0,a.useRouter)(),[t,n]=(0,s.useState)({date:new Date().toISOString().split("T")[0],description:"",amount:0,debitAccount:"",creditAccount:"",memo:""}),[c,d]=(0,s.useState)(!1),[l,u]=(0,s.useState)(""),m=["現金","普通預金","売上","売掛金","買掛金","仕入","旅費交通費","通信費","消耗品費","水道光熱費","家賃","雑費","資本金","元入金"],h=e=>{let{name:t,value:r}=e.target;n(e=>({...e,[t]:"amount"===t?""===r?"":Number(r):r}))},b=async n=>{n.preventDefault(),d(!0),u("");try{let n=(await (0,i.q)()).transaction("transactions","readwrite"),r=n.objectStore("transactions"),s={...t,date:t.date,createdAt:new Date().toISOString(),id:Date.now().toString()};await r.add(s),await n.done,e.push("/transactions")}catch(e){console.error("取引の保存に失敗しました:",e),u("取引の保存中にエラーが発生しました。再試行してください。"),d(!1)}};return(0,r.jsx)(o.A,{children:(0,r.jsxs)("div",{className:"container mx-auto p-4",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"新規仕訳入力"}),l&&(0,r.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:l}),(0,r.jsxs)("form",{onSubmit:b,className:"bg-white p-6 rounded shadow",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block mb-2 font-medium",children:"日付"}),(0,r.jsx)("input",{type:"date",name:"date",value:t.date,onChange:h,required:!0,className:"w-full p-2 border rounded"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block mb-2 font-medium",children:"金額"}),(0,r.jsx)("input",{type:"number",name:"amount",value:t.amount,onChange:h,required:!0,min:"0",className:"w-full p-2 border rounded",placeholder:"例: 10000"})]})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block mb-2 font-medium",children:"摘要"}),(0,r.jsx)("input",{type:"text",name:"description",value:t.description,onChange:h,required:!0,className:"w-full p-2 border rounded",placeholder:"例: 文房具購入"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block mb-2 font-medium",children:"借方科目"}),(0,r.jsxs)("select",{name:"debitAccount",value:t.debitAccount,onChange:h,required:!0,className:"w-full p-2 border rounded",children:[(0,r.jsx)("option",{value:"",children:"科目を選択"}),m.map(e=>(0,r.jsx)("option",{value:e,children:e},"debit-".concat(e)))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block mb-2 font-medium",children:"貸方科目"}),(0,r.jsxs)("select",{name:"creditAccount",value:t.creditAccount,onChange:h,required:!0,className:"w-full p-2 border rounded",children:[(0,r.jsx)("option",{value:"",children:"科目を選択"}),m.map(e=>(0,r.jsx)("option",{value:e,children:e},"credit-".concat(e)))]})]})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block mb-2 font-medium",children:"備考"}),(0,r.jsx)("textarea",{name:"memo",value:t.memo,onChange:h,className:"w-full p-2 border rounded",rows:3,placeholder:"補足情報があれば入力してください"})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,r.jsx)("button",{type:"button",onClick:()=>e.back(),className:"px-4 py-2 border rounded",disabled:c,children:"キャンセル"}),(0,r.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",disabled:c,children:c?"保存中...":"保存する"})]})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[8,636,593,792],()=>t(7368)),_N_E=e.O()}]);